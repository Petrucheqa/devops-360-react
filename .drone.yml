---

pipeline:
  dependencies:
    image: node:alpine
    commands:
      - yarn
  tests:
    image: node:alpine
    commands:
      - yarn test
  notify:
    image: plugins/slack
    webhook: <slack_webhook>
    channel: drone
    secrets: [ slack_webhook ]
    username: nadine_morano
    image_url: https://unsplash.it/256/256/?random
    template: >
      {{#success build.status}}
        La belle build {{build.number}} a fonctionné. GG.
      {{else}}
        La build {{build.number}} a raté. Nul. Fix-moi ça.
      {{/success}}
  build:
    image: node:alpine
    commands:
      - yarn build
